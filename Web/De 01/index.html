<html>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"
        integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>

    <script>
        //document.dangky.getElementByClass('d-none')[0].value; //

        $(document).ready(function () {
            banphimInitEvent(); // lan dau tien no chay

            $('#upload-btn').click(function() {
               $('#file-upload').trigger('click');
            });

            $('#file-upload').change(function(){
                var fileName =  $('#file-upload').val().split('\\').pop();
                $('#upload-btn').text(fileName);
            });

            $('#add-btn').click(function() {
               var rowTemplate = $('#row-template').html();
               $('#danh-sach-control').append(rowTemplate);
               // khoi tao su kien     
               banphimInitEvent();
            });

            

            function banphimInitEvent() {
                $('.banphim-class').change(function(){
                    var phim = $(this).val() || '?';
                    var button = $(this).next();
                    button.text(phim);
                });
            }
        });
    </script>
    <style>
        #danh-sach-control .row {
            margin-top: 5px;
        }

    </style>
</head>

<body>
    <main class="mt-3 container">
        <input type="file" id="file-upload" name="file-upload" class="d-none" />
        <button id="upload-btn" class="btn btn-primary upload-btn-class">Upload File</button>

        <h2>========================</h2>
        <button id="add-btn" class="btn btn-danger">Add</button>
        <div id="danh-sach-control" class="mt-1">
            <div class="row">
                <div class="col-3"><input type="text"  class="form-control" name="title1" /></div>
                <div class="col-6">
                    <input type="text" name="title2"  class="form-control" />
                </div>
                <div class="col-3">
                    <div class="d-flex">
                        <input type="text" name="banphim" class="banphim-class form-control"/>
                        <button class="btn btn-primary ml-1">?</button>
                    </div>
                </div>
            </div>

        </div>

        <div id="row-template" style="display:none">
            <div class="row">
                <div class="col-3"><input type="text"  class="form-control" name="title1" /></div>
                <div class="col-6">
                    <input type="text" name="title2"  class="form-control" />
                </div>
                <div class="col-3">
                    <div class="d-flex">
                        <input type="text" name="banphim" class="banphim-class form-control"/>
                        <button class="btn btn-primary ml-1">?</button>
                    </div>
                </div>
            </div>
        </div>
        
    </main>
</body>

</html>